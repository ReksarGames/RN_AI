# 📘 RN_AI Configuration Guide

## 📋 Структура Настроек

Все параметры делятся на три уровня:

| Тип | Описание | Область действия |
|-----|---------|------------------|
| **Глобальные** | Интерфейс, захват, дебаг | На весь проект |
| **Группы (Group)** | Профили с моделью и параметрами | Независимые профили |
| **Кнопки** | Наводка/триггер | На выбранную кнопку |

### ⚠️ Важные замечания

- ℹ️ Параметры во вкладке **Aim** применяются к активной кнопке прицеливания (**Targeting Button**).
- 🔄 Если Triggerbot на другой кнопке — временно назначьте её как Targeting Button, настройте, затем верните.
- 🎯 Если список классов пустой — система использует ВСЕ классы.

---

## 1️⃣ System (Система) ⚙️

### 🎨 Интерфейс

| Параметр | Описание | Примечание |
|----------|---------|-------------|
| **GUI DPI Scale** | Масштаб окна | Больше = крупнее элементы |
| **Auto Detect** | Авто-настройка DPI | По системным параметрам |
| **UI Language** | Язык интерфейса | English / Русский |
| **Font Scale** | Масштаб шрифта | Независимо от DPI |
| **UI Width Scale** | Ширина окна | ⚠️ Требует перезапуска |
| **UI Scale Detail** | Текущий DPI | Информационное |

> **💡 Совет:** После изменения UI Width Scale обязательно перезапустите приложение для применения.

### 🐛 Оверлей & Отладка

| Параметр | Действие |
|----------|----------|
| **Inference Window** | 🤖 Окно дебага с боксами и превью |
| **Print FPS** | 📊 Вывод FPS в консоль |
| **Show Motion Speed** | 📈 Скорость движения цели |
| **Show Curve** | 📉 Точки кривой движения |
| **Show Infer Time** | ⏱️ Время выполнения инференса |
| **Screenshot Separation** | 🔄 Мультитред захват/инференс |

### 🎯 Small Target Enhancement (Малые цели)

| Параметр | Описание | Эффект |
|----------|---------|--------|
| **Enable Small Target Enhancement** | ✅ Усиление приоритета мелких целей | Выше вес |
| **Enable Small Target Smoothing** | 🔄 Сглаживание координат | Плавнее движение |
| **Adaptive NMS** | 📖 Адаптивный NMS для мелких объектов | Лучше разделение |
| **Small Target Boost** | 📊 Множитель веса | Усиление |
| **Smooth History Frames** | 📉 Кадров для усреднения | Стабильность |
| **Small Target Threshold** | 📏 Порог размера для "малой" цели | px |
| **Medium Target Threshold** | 📏 Порог для "средней" цели | px |

> ⚠️ **Заметка:** Повышает стабильность, но может снижать FPS

### ⚡ Производительность

| Параметр | Действие |
|----------|----------|
| **Turbo Mode** | 🚀 Агрессивные оптимизации |
| **Skip Frame Processing** | ⏭️ Пропуск кадров (быстрее, реже обновления) |

### 🔍 Debug & Визуализация

| Параметр | Действие |
|----------|----------|
| **Recoil Debug** | 🔫 Отладка компенсации отдачи |
| **Class Priority Debug** | 🎯 Отладка приоритета классов |
| **Show Aim Scope** | ⭕ Круг области прицеливания |

### 📹 Захват (Capture)

| Параметр | Описание | Значения |
|----------|---------|----------|
| **Capture Source** | Тип захвата | Standard / OBS / Capture Card |
| **Capture Offset X/Y** | Смещение от центра | Пиксели (Standard только) |
| **OBS IP/Port/FPS** | Сетевой захват | IP:Port, FPS |
| **Capture Device** | ID устройства | Зависит от ОС |
| **Capture FPS** | FPS источника | 60/120/144 и т.д. |
| **Capture Resolution** | Разрешение потока | WxH (например: 1920x1080) |
| **Capture Crop Size** | Размер кропа | Пиксели |
| **Video Codec** | FourCC | NV12, MJPG, YUYV и т.д. |
| **Current Capture** | Активный источник | Информационное |

---

## 2️⃣ Aim (Прицеливание) 🎯

### 🔄 Алгоритм Работы

```
┌────────────────────────────────────────────────────┐
│ 1️⃣  Модель YOLO                        │
│    Обнаружение объектов → Боксы         │
└────────────────────────────────────────────────────┘
                       │
┌────────────────────────────────────────────────────┐
│ 2️⃣  Выбор конфига по кнопке            │
│    Targeting Button → Config             │
└────────────────────────────────────────────────────┘
                       │
┌────────────────────────────────────────────────────┐
│ 3️⃣  Отбор целей                        │
│    Приоритеты + Aim Scope → Лучшая      │
└────────────────────────────────────────────────────┘
                       │
┌────────────────────────────────────────────────────┐
│ 4️⃣  Точка прицеливания                 │
│    Aim Position (внутри бокса)          │
└────────────────────────────────────────────────────┘
                       │
┌────────────────────────────────────────────────────┐
│ 5️⃣  Контроллер движения                │
│    PID / Sunone → Движение мыши         │
└────────────────────────────────────────────────────┘
                       │
┌────────────────────────────────────────────────────┐
│ 6️⃣  Триггер (опционально)             │
│    Если цель в триггер-зоне → Выстрел  │
└────────────────────────────────────────────────────┘
```

### 🎮 Aim Controller (Выбор Алгоритма)

| Контроллер | Описание | Лучше для |
|-----------|---------|----------|
| **PID** | Классический контроллер с пропорц. усилением | Стабильные, предсказуемые движения |
| **Sunone** | Продвинутый алгоритм (Калман + предикт) | Плавность, человеческие движения |

#### 💡 Рекомендации

- 🟢 **Начинающим:** Попробуйте **PID** для стабильности
- 🟡 **Продвинутым:** Экспериментируйте с **Sunone** для плавности

### 📊 Sunone Settings (Базовая плавность)

| Параметр | Описание | Эффект |
|----------|---------|--------|
| **Enable Smoothing** | Включить плавность | Нa/Выкл |
| **Tracking Smooth** | Сглаживание слежения | Плавнее движение за целью |
| **Smoothness** | Сила сглаживания | Выше = Плавнее + медленнее |

### 🔬 Kalman Filter (Sunone)

| Параметр | Назначение | Руководство |
|----------|-----------|-------------|
| **Enable Kalman** | Включить фильтр | Сглаживает шум модели |
| **Q** (Process Noise) | Скорость изменения | ⬆️ Q = быстрее + дергано |
| **R** (Measurement Noise) | Доверие модели | ⬆️ R = плавнее + медленнее |
| **Kalman Speed X/Y** | Множитель по осям | Регулировка скорости |
| **Reset Threshold** | Сброс фильтра | При резких скачках позиции |

### 🎯 Prediction (Sunone)

| Параметр | Описание | Примечание |
|----------|---------|----------|
| **Prediction Mode** | Тип предсказания | Standard / Kalman / Kalman+Standard |
| **Prediction Interval** | Шаг обновления | Меньше = чаще обновления |
| **Kalman Lead (ms)** | Опережение цели | Компенсация задержки |
| **Kalman Max Lead (ms)** | Макс опережение | Ограничитель |
| **Velocity Smoothing** | Сглаживание скорости | Уменьшает дрожание |
| **Velocity Scale** | Масштаб скорости | Усиливает/ослабляет опережение |
| **Prediction Kalman Q/R** | Параметры фильтра | Для блока предикта |
| **Future Positions** | Будущих точек | Сколько вычислять |
| **Draw Future Positions** | Показать позиции | Визуализация в отладке |
| **Prediction Preview** | Демонстрация | Видеть работу алгоритма |

### 📈 Speed Curve (Sunone)

Регулирует скорость движения мыши в зависимости от расстояния до цели.

| Параметр | Назначение | Эффект |
|----------|-----------|--------|
| **Min Speed** | Минимальная скорость | На близких расстояниях |
| **Max Speed** | Максимальная скорость | На дальних расстояниях |
| **Snap Radius** | Зона "прилипания" | Ускоряет доводку к цели |
| **Near Radius** | Область изменения скорости | Расстояние в пиксселях |
| **Curve Exponent** | Крутизна кривой | Резкость изменения скорости |
| **Snap Boost** | Усиление прилипания | Множитель эффекта |
| **Speed Curve Preview** | Визуализация | 📊 График кривой |

### 🐛 Sunone Debug

| Параметр | Действие |
|----------|----------|
| **Show Predicted Target** | 🎯 Точка предсказания цели |
| **Show Step** | 📍 Следующий шаг движения |
| **Show Future Points** | 📊 Цепочка будущих позиций |

### 👆 Long Press (Долгое нажатие)

| Параметр | Описание |
|----------|----------|
| **Long Press No Lock Y** | Не фиксировать Y при удержании |
| **Long Press Threshold** | Мс удержания для "долгого" нажатия |

### 🔄 Target Switching (Переключение целей)

| Параметр | Описание |
|----------|----------|
| **Target Switch Delay** | Защита от мгновенного перескока |
| **Target Reference Class** | Класс для отслеживания |

### 🎯 Aim Scope & Offset

| Параметр | Описание |
|----------|----------|
| **Min Offset** | Мин вертикальный сдвиг |
| **Aim Scope** | Радиус выбора цели (px) |

### 🔐 Smart Target Lock (Dynamic Scope)

| Параметр | Описание |
|----------|----------|
| **Smart Target Lock** | Удержание текущей цели |
| **Min Scope** | Мин размер области при замке |
| **Shrink Duration** | Время сжатия области (ms) |
| **Recover Duration** | Время восстановления (ms) |
| **Lock Distance** | Макс дистанция отслеживания (px) |

### ⭕ Move Deadzone

| Параметр | Описание |
|----------|----------|
| **Move Deadzone** | Мин амплитуда для движения (px) |

### ⚖️ Aim Weights (Весовые коэффициенты)

| Параметр | Описание | Влияние |
|----------|---------|--------|
| **Distance Weight** | Вес дистанции | Ближе = выше приоритет |
| **Center Weight** | Вес близости к центру | К центру экрана |
| **Size Weight** | Вес размера цели | Крупнее = выше приоритет |

### 🎮 PID Controller Parameters

| Параметр | Назначение | Рекомендация |
|----------|-----------|------------|
| **Kp** | Скорость реакции | Выше = быстрее, но нестабильнее |
| **Ki** | Устранение постоянной ошибки | Осторожно! Может давать качание |
| **Kd** | Сглаживание рывков | Снижает дергание, не переусложняйте |
| **X/Y Limit** | Ограничение интеграла | Предотвращает перерегулирование |
| **X/Y Smooth** | Сглаживание по осям | Индивидуально для каждой оси |
| **Smooth Algorithm** | Модель фильтра | Выбор алгоритма фильтрации |
| **Smooth Deadzone** | Зона без сглаживания | Очень малые движения |

### 🔫 Trigger Config (Триггер)

| Параметр | Описание | Применяется |
|----------|---------|----------|
| **Auto Trigger** | Авто-выстрел при цели в зоне | При активации триггера |
| **Continuous Trigger** | Удерживать кнопку стрельбы | Пока цель в зоне |
| **Trigger Recoil** | Компенсация отдачи | Во время триггера |
| **Trigger Delay** | Задержка перед выстрелом | ms |
| **Press Duration** | Длительность зажатия | ms |
| **Trigger Cooldown** | Пауза после выстрела | ms |
| **Random Delay** | Рандомизация задержек | Маскировка |
| **X/Y Trigger Scope** | Размер зоны | Относительно бокса |
| **X/Y Trigger Offset** | Смещение зоны | Пиксели |
| **Preview** | Визуализация | 🔴 Красный прямоугольник |

### ⚠️ Важно о Triggerbot

- **Работает по удержанию своей кнопки**
- 🔘 Если **отдельная Triggerbot Button** → стреляет независимо
- 🔘 Если **совпадает с Targeting Button** → работает совместно с наводкой

---

## 3️⃣ Classes (Классы) 🧩

### 📝 Управление Классами

| Параметр | Действие | Примечание |
|----------|---------|----------|
| **Class Names File** | Загрузить из .txt файла | По одному в строке |
| **Load Names** | 📂 Импорт из файла | Перезаписывает текущий список |
| **Class Names (Manual)** | Ручной ввод | Каждая строка = класс |
| **Apply Names** | ✅ Применить список | Сохраняет изменения |

### 🎯 Конфигурация Классов

| Параметр | Описание | Значения |
|----------|---------|----------|
| **Class Priority** | Порядок приоритета | Пример: `7-0-4` |
| **Inference Classes** | Включить/выключить | Чекбоксы для каждого |
| **Select Class** | Выбрать для редактирования | Текущий класс |
| **Confidence Threshold** | Порог уверенности | 0.0 — 1.0 |
| **IOU** | Порог NMS | 0.0 — 1.0 |

### 🎯 Точки Прицеливания

| Параметр | Описание | Диапазон | Примечание |
|----------|---------|----------|----------|
| **Aim Position** | Основная точка | 0.0 — 1.0 | 0=верх, 1=низ |
| **Aim Position 2** | Вторая точка | 0.0 — 1.0 | Двухступенчатое поведение |
| **Aim Preview** | 📊 Визуализация | — | Показывает позицию в боксе |

> 💡 **Если ничего не выбрано в Inference Classes** → используются ВСЕ классы

---

## 4️⃣ Driver (Драйвер) 🧠

### 📋 Кривые Движения

| Параметр | Описание | Применение |
|----------|---------|----------|
| **Move Curve** | Человеческая кривая движения | Маскировка от анти-читов |
| **Compensation Curve** | Компенсационный профиль | Коррекция движения |
| **Control Points** | Контрольные точки кривой | Больше = плавнее |
| **Path Points Total** | Точек в траектории | Детализация пути |

### 📏 Границы & Отклонения

| Параметр | Описание | Влияние |
|----------|---------|--------|
| **Horizontal Boundary** | Диапазон X отклонений | Ширина вариации |
| **Vertical Boundary** | Диапазон Y отклонений | Высота вариации |
| **Distortion Mean** | Среднее искажение | Смещение позиции |
| **Distortion StdDev** | Дисперсия искажения | Вариативность |
| **Distortion Frequency** | Частота искажений | Как часто менять путь |

### 🔧 Технические параметры

| Параметр | Назначение |
|----------|----------|
| **Move Method** | Метод отправки движения (makcu) |

---

## 5️⃣ Bypass (Обход) 🛡️

Эта вкладка маскирует физические нажатия и движение, пока драйвер активен.

### 🖱️ Маскировка Кнопок Мыши

| Параметр | Действие |
|----------|----------|
| **Mask Left** | Блокировка ЛКМ |
| **Mask Right** | Блокировка ПКМ |
| **Mask Middle** | Блокировка средней кнопки |
| **Mask Side1** | Блокировка боковой кнопки 1 |
| **Mask Side2** | Блокировка боковой кнопки 2 |
| **Mask Wheel** | Блокировка колеса прокрутки |

### 📍 Маскировка Движения

| Параметр | Действие |
|----------|----------|
| **Mask X Axis** | Блокировка движения по горизонтали |
| **Mask Y Axis** | Блокировка движения по вертикали |
| **Aim Mask X** | Маска X только для наводки |
| **Aim Mask Y** | Маска Y только для наводки |

---

## 6️⃣ Strafe (Отдача/Стрейф) 🔫

### 🎮 Профили Отдачи

| Параметр | Описание | Действие |
|----------|---------|----------|
| **Check Right Button** | Условие срабатывания | Только при зажатом ПКМ |
| **Game / Gun** | Список игр и оружия | Иерархия профилей |
| **Add/Delete Game** | Управление игрой | ➕ Новая / ➖ Удалить |
| **Add/Delete Gun** | Управление оружием | ➕ Новое / ➖ Удалить |

### 📊 Этапы Отдачи (Stages)

| Параметр | Описание | Значения |
|----------|---------|----------|
| **Index** | Номер этапа | 1, 2, 3... |
| **Count** | Шагов в этапе | Целое число |
| **X** | Смещение горизонтали | Пиксели |
| **Y** | Смещение вертикали | Пиксели |
| **Add/Delete Index** | Управление | ➕ / ➖ |

### 🎬 Trajectory Recoil (Mouse_re)

| Параметр | Описание | Применение |
|----------|---------|----------|
| **Enable mouse_re Trajectory Recoil** | Использовать траектории | Включить/выключить |
| **Replay Speed** | Скорость воспроизведения | Ускорение траектории |
| **Pixel Enhancement Ratio** | Усиление пиксела | Множитель смещений |
| **Import Trajectory File** | Импорт JSON | 📂 Файл траектории |
| **Clear Mapping** | Сброс соответствий | Очистить все |
| **Current Status** | Статус и инфо | 📊 Файл и точки |

---

## 7️⃣ Config (Конфиг) ⚙️

### 🎮 Назначение Кнопок

| Параметр | Назначение | Примечание |
|----------|-----------|----------|
| **Targeting Buttons** | Кнопка наводки | Основная кнопка аима |
| **Triggerbot Buttons** | Кнопка триггера | Отдельная от аима |
| **Disable Headshot Buttons** | Отключение головы | Alt кнопка |
| **Disable Headshot Class ID** | ID класса для отключения | Номер класса |
| **Disable headshot (status)** | Статус отключения | Информационное |

### 🤖 Настройки Модели

| Параметр | Описание | Варианты |
|----------|---------|----------|
| **Group Name** | Имя профиля | Произвольная строка |
| **Add/Delete Group** | Управление профилями | ➕ / ➖ |
| **TRT** | TensorRT (если есть .engine) | ✅ Вкл / ❌ Выкл |
| **Use Sunone Processing** | Постобработка Sunone | ⚠️ Может снижать FPS |
| **YOLO Version** | Версия декодера | v8, v9, v10, v11, v12 |
| **Inference Model** | Путь к модели | ONNX или .engine |
| **Select Model** | Выбор файла | 📂 Обзор |

### 🖥️ Управление

| Кнопка | Действие |
|--------|----------|
| **Start** | ▶️ Запуск системы |
| **Stop** | ⏹️ Остановка системы |
| **Save Config** | 💾 Сохранить в cfg.json |

---

## 📚 Полезные Замечания ✅

### 🔄 Конвертация Моделей

> 💡 Если включен **TRT** и `.engine` не найден → будет автоматическая конвертация из ONNX при старте

### 📹 Захват Видео

> ⚠️ Для **OBS** и **Capture Card** нужны корректные:
> - IP адрес и Port для OBS
> - Параметры разрешения, FPS, кодека

### ⚡ Оптимизация FPS

```
Если FPS упал, попробуйте по порядку:

1. 🔴 Отключить Sunone Processing
2. 📉 Уменьшить разрешение модели
3. 🎯 Снизить Capture Resolution
4. ⏭️ Включить Skip Frame Processing
5. 🚀 Включить Turbo Mode
```

---

## 📖 Дополнительная Помощь

- 📂 Все параметры сохраняются в **cfg.json**
- 🖥️ Используйте вкладку **System** для отладки (Inference Window, Show Infer Time)
- 🧪 Тестируйте настройки постепенно, не меняйте всё сразу

<div align="center">

**Успехов в настройке! 🎯**

</div>
